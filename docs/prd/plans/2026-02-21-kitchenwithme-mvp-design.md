# 厨房陪我 MVP 设计文档

## 0. 决策摘要

- 产品阶段：MVP（Web 优先）
- 价值优先级：`陪伴感优先`
- 场景优先级：`做饭中` -> `开火后` -> `开火前（仅已有菜快速选择）`
- 语音策略：默认走 `B（有限领域连续陪伴）`，若技术调研命中闸门则直接 `A（开放式连续双向语音）`

## 1. MVP 范围与成功标准

### 1.1 范围

- P0：做饭中语音陪伴主链路
- P1：开火后味觉/心情记录
- P2：开火前从已有菜快速选择

### 1.2 技术调研闸门（满足即可直上 A）

- Web 端连续双向中文语音可用
- 支持打断/插话（barge-in）
- 端到端语音响应稳定（目标 P50 < 1.2s）
- 成本在 MVP 可承受范围内

### 1.3 明确不做（MVP）

- 营养分析与复杂健康评分
- 打卡/KPI/任务化激励体系
- 社交内容流与重运营活动
- 偏离“陪伴、轻秩序、烟火感”的扩展功能

### 1.4 成功标准（MVP）

- 用户可完成完整主链路：开始做饭 -> 语音陪伴完成关键步骤 -> 结束后记录
- 语音陪伴主流程完成率 > 60%
- 用户反馈中“被催促/被评判”显著低频
- 至少可稳定支持 1 个完整菜谱做饭会话

## 2. 信息架构与页面流（Web）

### 2.1 信息架构

- `今日开火`（主入口，默认聚焦）
- `三餐日历`
- `味觉记忆`
- `冰箱角落`

### 2.2 Figma 页面分组（MVP）

- `00_Foundation`：色彩、字体、圆角、光晕、文案语气
- `01_Flow_Start`：已有菜快速选择
- `02_Flow_Cooking`：做饭中语音陪伴主界面
- `03_Flow_Reflection`：开火后轻记录
- `04_History`：日历/记忆查看
- `05_Edge_States`：异常与降级状态

### 2.3 核心用户流

1. 进入首页，快速选择已有菜
2. 进入做饭中会话页，语音陪伴完成步骤
3. 做饭后进入轻记录，填写味觉和心情
4. 返回首页，看到“今日已开火”柔光状态

### 2.4 关键交互状态

- 静默：暖灰线条，无发光
- 进行中：图标外柔光晕
- 已记录：微小亮点，不使用对勾/叉号
- 出错：温柔重试，不使用红色告警框

## 3. 语音陪伴能力边界与系统架构

### 3.1 MVP 能力边界（B 方案）

- 体感连续陪伴，语义理解限定在“做饭中”
- 首批支持意图：
  - 下一步
  - 重复
  - 慢一点
  - 暂停/继续
  - 开始计时
  - 食材替代
  - 火候确认
  - 安全提醒
- 越界问题：温柔承接后拉回烹饪上下文

### 3.2 系统架构（可平滑升级 A）

- Web 前端：采集、播放、字幕、状态反馈
- Realtime 语音层：流式 STT/TTS + 中断控制
- 会话编排层：步骤状态、计时器、上下文
- 意图路由层：白名单意图解析与动作执行
- 数据层：菜谱、替代规则、开火记录
- 观测层：延迟、识别成功率、兜底率、会话完成率

### 3.3 B -> A 升级策略

- 保持前端协议和会话状态机不变
- 将白名单意图替换为开放语义理解
- 保留品牌语气护栏和安全后处理
- 在不重做 UI/主流程的前提下升级

### 3.4 建议技术指标

- 语音响应延迟：P50 < 1.2s，P95 < 2.0s
- 中断响应：< 400ms
- 主链路完成率：> 60%
- 兜底触发率：版本迭代下降

## 4. 异常处理、验收与里程碑

### 4.1 异常处理原则

- 不打断做饭节奏，优先“继续陪伴”
- 先给下一步，再解释原因
- 全程坚持非命令、非评判语气

### 4.2 异常场景与兜底

- 麦克风权限拒绝：引导重试 + 按键替代
- 弱网中断：降级短句陪伴 + 本地步骤浏览
- 识别失败：提示可说短指令（下一步/重复）
- 播放失败：自动切文字模式
- 意图越界：承接后拉回当前步骤
- 计时冲突：保留计时并明确当前优先级

### 4.3 MVP Release Gate

- 主链路 E2E 可用
- 打断/重复/下一步/计时器稳定可用
- 品牌禁忌不出现（文案与视觉）
- 记录可在日历/记忆中查看
- 核心指标可观测

### 4.4 里程碑（建议）

- Week 1：语音框架调研闸门（B 或直上 A）
- Week 2-3：P0 主链路打通（含异常兜底）
- Week 4：P1 记录与历史查看
- Week 5：小范围试用 + 指标复盘 + 升级决策
